"use strict";(self.webpackChunkimage_gallery_client=self.webpackChunkimage_gallery_client||[]).push([[662],{2874:function(e,t,r){var s=r(184);t.Z=function(e){var t=e.onFileSelect;return(0,s.jsx)("div",{children:(0,s.jsx)("input",{className:"border border-gray-200 w-full rounded-md mb-3",type:"file",onChange:function(e){t(e.target.files[0])}})})}},6131:function(e,t,r){var s=r(9439),n=r(2791),l=r(2874),a=r(184);t.Z=function(e){var t=e.categoryData,r=e.submitFn,i=e.isUploadLoading,o=e.isUploadError,d=e.uploadError,u=e.method,c=e.imageData,x=(0,n.useState)(c?c.image.title:""),m=(0,s.Z)(x,2),f=m[0],g=m[1],h=(0,n.useState)(c?c.image.desc:""),p=(0,s.Z)(h,2),y=p[0],j=p[1],b=(0,n.useState)(c?c.image.category._id:""),v=(0,s.Z)(b,2),w=v[0],N=v[1],k=(0,n.useState)(null),F=(0,s.Z)(k,2),S=F[0],I=F[1],E=(0,n.useState)(!1),C=(0,s.Z)(E,2),U=C[0],D=C[1];return(0,a.jsxs)("div",{className:"m-5 p-5 w-96 shadow-md shadow-gray-200",style:{fontFamily:"Quicksand"},children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-center",children:["create"===u?"Upload":"Edit"," your image"]}),i&&(0,a.jsx)("p",{className:"bg-green-200 mb-3 rounded text-center px-5",children:(0,a.jsx)("span",{className:"animate-pulsetacking-wider font-bold text-green-600 mb-3",children:"Photo Uploading ...."})}),o&&(0,a.jsx)("p",{className:"text-red-400 text-sm bg-red-100 px-3 py-1 rounded mb-3",children:null===d||void 0===d?void 0:d.info.message}),U&&(0,a.jsx)("p",{className:"text-red-400 text-sm bg-red-100 px-3 py-1 rounded mb-3",children:"Fill up all fields"}),(0,a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==f&&""!==w&&""!==y){var t=new FormData;t.append("title",f),t.append("desc",y),t.append("category",w),"create"===u&&t.append("image",S),r(t)}else D(!0)},children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"image-title",children:"Title"}),(0,a.jsx)("input",{className:"border border-gray-300 rounded-md px-3 py-1 w-full mb-3",type:"text",id:"image-title",value:f,onChange:function(e){return g(e.target.value)}})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"image-category",children:"Select Category"}),(0,a.jsxs)("select",{value:w,onChange:function(e){return N(e.target.value)},className:"border border-gray-300 rounded-md px-3 py-2 w-full mb-3 bg-white",name:"category",id:"image-category",children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),t.map((function(e){return(0,a.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"image-desc",children:"Description"}),(0,a.jsx)("textarea",{className:"border border-gray-300 rounded-md px-3 py-1 w-full mb-3",type:"text",id:"image-desc",value:y,onChange:function(e){return j(e.target.value)}})]}),"create"===u&&(0,a.jsx)(l.Z,{onFileSelect:function(e){return I(e)}}),(0,a.jsx)("button",{type:"submit",className:"bg-orange-500 text-white rounded-md px-3 py-1",children:"create"===u?"Add Photo":"Edit Photo"})]})]})}},4662:function(e,t,r){r.r(t),r.d(t,{default:function(){return w},loader:function(){return N}});var s=r(9439),n=r(7689),l=r(2791),a=r(5893),i=r(2874),o=r(184),d=function(e){var t=e.imgUrl,r=e.user,n=e.userId,d=e.uploadProfilePhoto,u=e.setProfilePhotoUploadModal,c=e.profilePhotoUploadModal,x=(0,l.useState)(null),m=(0,s.Z)(x,2),f=m[0],g=m[1];return(0,o.jsxs)("div",{className:"mx-auto lg:mx-0 w-[220px] h-[220px] rounded-md",children:[t?(0,o.jsx)("img",{src:t,alt:"",className:"h-full w-full rounded-md md:rounded-full"}):(null===r||void 0===r?void 0:r._id)===n?(0,o.jsx)("div",{className:"w-full h-full rounded-md md:rounded-full flex flex-col justify-center items-center bg-gray-200 text-gray-400 cursor-pointer",onClick:function(){return u(!0)},children:"UPLOAD"}):(0,o.jsx)("div",{className:"w-full h-full rounded-md md:rounded-full flex flex-col justify-center items-center bg-gray-200 text-gray-400 cursor-default",children:"No Photo"}),(0,o.jsxs)(a.Z,{isVisible:c,onClose:function(){return u(!1)},children:[(0,o.jsx)("h3",{className:"text-2xl text-center my-3",children:"Upload Your Photo"}),(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("profile-photo",f),d(t)},className:"flex flex-col jutify-center items-center mx-[80px]",children:[(0,o.jsx)(i.Z,{onFileSelect:function(e){return g(e)}}),(0,o.jsx)("button",{type:"submit",className:"text-sm bg-orange-500 text-white px-5 py-1 rounded mx-auto",children:"Upload"})]})]})]})},u=r(7692),c=r(8820),x=function(e){var t=e.defaultValue,r=e.name,n=e.onClose,a=e.elemType,i=e.singleEdit,d=(0,l.useState)(""),x=(0,s.Z)(d,2),m=x[0],f=x[1];return t||(t=""),(0,o.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append(r,m),i(t)},children:(0,o.jsxs)("div",{className:"flex ".concat("textarea"===a?"flex-col":"flex-row"),children:[!a&&(0,o.jsx)("input",{type:"text",name:"input",onChange:function(e){return f(e.target.value)},defaultValue:t,className:"border border-gray-200 px-2 rounded mb-1 w-[220px]"}),"textarea"===a&&(0,o.jsx)("textarea",{type:"text",name:"input",defaultValue:t,onChange:function(e){return f(e.target.value)},className:"border border-gray-200 px-2 rounded mb-1 "}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("button",{type:"submit",className:"".concat("textarea"!==a?"hidden":"block"," text-gray-500 h-[30px] w-[30px] flex flex-col justify-center items-center bg-gray-100  mx-1 rounded-full"),children:(0,o.jsx)(u.y4V,{})}),(0,o.jsx)("button",{onClick:function(){return n(!1)},className:"ml-1 text-gray-500 bg-gray-100 h-[30px] w-[30px] flex flex-col justify-center items-center rounded-full",children:(0,o.jsx)(c.oHP,{})})]})]})})},m=function(e){var t=e.data,r=e.authUser,s=e.showProfessionForm,l=e.setShowProfessionForm,a=e.setUploadImageModal,i=e.singleEdit,d=(0,n.V4)("root"),u=new Date(t.createdAt);return(0,o.jsxs)("div",{className:"mx-auto md:ml-0 md:mt-5 lg:ml-20",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold leading-loose",children:t.name}),s&&(0,o.jsx)(x,{defaultValue:t.profession,name:"profession",onClose:l,singleEdit:i}),t.profession||t._id!==(null===r||void 0===r?void 0:r._id)||s?null:(0,o.jsx)("button",{onClick:function(){return l(!0)},className:"text-sm px-2 py-1 bg-gray-100 rounded tracking-wide text-gray-500",children:"Add profession"}),!s&&(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("h4",{className:"text-md text-blue-500 tracking-wider font-bold",children:t.profession&&t.profession}),t.profession&&(t._id===(null===r||void 0===r?void 0:r._id)?(0,o.jsx)("button",{onClick:function(){return l(!0)},className:"rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200 p-1 ml-1",children:(0,o.jsx)(c.$iz,{})}):null)]}),(0,o.jsxs)("h4",{className:"text-sm text-gray-400 italic",children:["Member since : ",u.getFullYear()]}),d&&(0,o.jsx)("button",{onClick:function(){return a(!0)},className:"bg-orange-600 shadow shadow-sky-950 shadow-md ease-in duration-150 hover:shadow-none text-white text-lg rounded-md px-5 tracking-wider font-semibold text-sm py-2 flex flex-row items-center my-5 ease-in duration-300",style:{fontFamily:"Quicksand"},children:"Upload"})]})},f=r(1087),g=r(456),h=function(e){var t=e.userId,r=e.authUser,s=((0,n.UO)("userId"),(0,n.V4)("root"));return s&&"EXPIRED"!==s&&(0,g.Z)(s),(0,o.jsxs)("div",{className:"w-full flex flex-row items-center justify-center md:justify-normal border-t border-b border-gray-200 text-sm",children:[(0,o.jsx)("div",{className:"flex flex-row justify-center items-center mr-5",children:(0,o.jsx)(f.rU,{to:"",className:"flex flex-row justify-between items-center p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:" Photos"})}),(0,o.jsx)("div",{className:"flex flex-row justify-center items-center mr-5",children:(0,o.jsx)(f.rU,{to:"about",className:"flex flex-row justify-between items-center p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:" About"})}),(null===r||void 0===r?void 0:r._id)===t&&(0,o.jsx)("div",{className:"flex flex-row justify-center items-center mr-5",children:(0,o.jsx)(f.rU,{to:"upload",className:"flex flex-row justify-between items-center p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:" Upload Photo"})}),(null===r||void 0===r?void 0:r._id)===t&&(0,o.jsx)("div",{className:"flex flex-row justify-center items-center mr-5",children:(0,o.jsx)(f.rU,{to:"settings",className:"flex flex-row justify-between items-center p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:" Settings"})})]})},p=function(e){var t=e.data,r=e.user,n=e.setShowBioForm,a=e.showBioForm,i=e.setShowInterestForm,d=e.showInterestForm,u=e.singleEdit,m=e.handleDeleteBio,f=e.handleDeleteInterest,g=e.isInterestLoading,h=(0,l.useState)(""),p=(0,s.Z)(h,2);p[0],p[1];return(0,o.jsxs)("div",{className:"lg:w-[340px]",children:[(0,o.jsxs)("div",{className:" mt-5",children:[(0,o.jsx)("span",{className:"text-gray-400",children:"BIO"}),(0,o.jsx)("hr",{className:"border-[1px] mb-1 text-gray-400 w-full"}),a&&(0,o.jsx)(x,{defaultValue:t.bio,name:"bio",onClose:n,elemType:"textarea",singleEdit:u}),t.bio?null:(null===r||void 0===r?void 0:r._id)===t._id?!a&&(0,o.jsxs)("button",{onClick:function(){return n(!0)},className:"flex flex-row items-center justify-center bg-gray-100 rounded px-2 py-1 text-xs text-gray-500 tracking-wide",style:{fontFamily:"Quicksand"},children:[" ",(0,o.jsx)(c.Lfi,{className:"mr-1 "}),"Add Bio"]}):null,t.bio&&(0,o.jsx)("p",{className:"text-sm text-gray-600 tracking-wider py-3 italic text-center lg:text-justify",children:t.bio}),t.bio&&(null===r||void 0===r?void 0:r._id)===t._id?(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsxs)("button",{onClick:function(){return n(!0)},className:"flex flex-row items-center justify-center bg-gray-100 rounded-full p-1 text-gray-400 mr-2",style:{fontFamily:"Quicksand"},children:[" ",(0,o.jsx)(c.$iz,{})]}),(0,o.jsx)("form",{onSubmit:function(e){e.preventDefault(),m()},children:(0,o.jsxs)("button",{type:"submit",className:"flex flex-row items-center justify-center bg-gray-100 rounded-full p-1 text-gray-400",style:{fontFamily:"Quicksand"},children:[" ",(0,o.jsx)(c.YK6,{})]})})]}):null]}),(0,o.jsxs)("div",{className:" mt-5",children:[(0,o.jsx)("span",{className:"text-gray-400",children:"INTERESTS"})," ",(0,o.jsx)("hr",{className:"border-[1px] text-gray-400 w-full"}),(0,o.jsxs)("div",{className:"py-3 my-5 mx-auto md:my-0 flex flex-col justify-between",style:{fontFamily:"Quicksand"},children:[d&&(0,o.jsx)(x,{name:"interest",onClose:i,singleEdit:u}),t.interest&&t.interest.map((function(e,s){return(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsxs)("h4",{className:"text-sm mx-auto md:mx-0 font-semibold text-gray-600 mb-1",children:[" ",e," "]}),g&&(0,o.jsx)("p",{className:"animate-pules",children:"Removing..."}),(null===r||void 0===r?void 0:r._id)===t._id&&(0,o.jsx)("button",{onClick:function(){return function(e){f(e)}(e)},className:"flex flex-row items-center justify-center bg-gray-100 rounded-full p-1 text-gray-400 ml-5 text-sm",children:(0,o.jsx)(c.oHP,{})})]},s)})),(0,o.jsx)("div",{children:t.interest&&0!==t.interest.length?0!==t.interest.length&&t.interest.length<3&&(null===r||void 0===r?void 0:r._id)===t._id?(0,o.jsxs)("button",{onClick:function(){return i(!0)},className:"flex flex-row items-center justify-center bg-gray-100 rounded px-1 py-1 text-xs text-gray-500 tracking-wide",children:[(0,o.jsx)(c.Lfi,{className:"mr-1"})," more"]}):null:(null===r||void 0===r?void 0:r._id)===t._id?(0,o.jsxs)("button",{onClick:function(){return i(!0)},className:"flex flex-row items-center justify-center bg-gray-100 rounded px-2 py-1 text-xs text-gray-500 tracking-wide",children:[(0,o.jsx)(c.Lfi,{className:"mr-1 "})," Add interest"]}):null})]})]})]})},y=r(5439),j=r(3418),b=r(9645),v=(r(763),r(6131)),w=function(){var e,t=(0,n.UO)("userId"),r=(0,n.V4)("root"),i=(0,n.s0)(),c=(0,l.useState)(!1),x=(0,s.Z)(c,2),f=x[0],w=x[1],N=(0,l.useState)(!1),k=(0,s.Z)(N,2),F=k[0],S=k[1],I=(0,l.useState)(!1),E=(0,s.Z)(I,2),C=E[0],U=E[1],D=(0,l.useState)(!1),P=(0,s.Z)(D,2),_=P[0],Z=P[1],L=(0,l.useState)(!1),Q=(0,s.Z)(L,2),V=Q[0],q=Q[1];r&&"EXPIRED"!==r&&(e=(0,g.Z)(r));var B=(0,y.a)({queryKey:["categories"],queryFn:function(){return(0,b.pE)()}}),K=B.data,A=(B.isError,B.error,(0,y.a)({queryKey:["user",t.userId],queryFn:function(e){var r=e.signal;return(0,b.BT)({signal:r,id:t.userId})}})),M=A.data,T=(A.isError,A.error,(0,j.D)({mutationFn:b.mh,onSuccess:function(){b.Eh.invalidateQueries({queryKey:["images"]}),S(!1)}})),O=T.mutate,R=T.isLoading,X=T.isError,Y=T.error,z=(0,j.D)({mutationFn:b.Nd,onSuccess:function(){b.Eh.invalidateQueries({queryKey:["user"]}),w(!1)}}),H=z.mutate,W=(z.isLoading,z.isError,z.error,(0,j.D)({mutationFn:b.N,onSuccess:function(){b.Eh.invalidateQueries({queryKey:["user"]}),U(!1),Z(!1),q(!1)}})),$=W.mutate,G=W.isLoading,J=(W.isError,W.error,function(e){var s=t.userId;$({formData:e,userId:s,token:r})}),ee=(0,j.D)({mutationFn:b.bk,onSuccess:function(){b.Eh.invalidateQueries({queryKey:["user"]})}}).mutate,te=(0,j.D)({mutationFn:b.im,onSuccess:function(){b.Eh.invalidateQueries({queryKey:["user"]})}}),re=te.mutate,se=te.isLoading;return(0,o.jsxs)("section",{className:"bg-slate-200 pt-5 min-h-screen px-0 md:px-5 lg:px-[250px]",children:[(0,o.jsxs)("div",{className:"container mx-auto min-h-[800px] bg-white rounded-md flex flex-col relative",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("button",{onClick:function(){i(-1)},className:"absolute top-5 right-10 bg-gray-100 hover:bg-gray-200 text-gray-500 p-4 rounded-full flex flex-row items-center",children:(0,o.jsx)(u.YiX,{})})}),G&&(0,o.jsx)("div",{className:"absolute -left-4 -top-4 w-[200px] px-5 py-2 bg-yellow-400 ",children:(0,o.jsx)("p",{className:"text-gray-600 animate-pulse",children:"Updating..."})}),(0,o.jsxs)("div",{className:"w-full p-5 flex flex-col md:flex-row ",children:[(0,o.jsx)(d,{imgUrl:M.profile_photo,user:e,userId:t.userId,uploadProfilePhoto:function(e){var s=t.userId;H({formData:e,userId:s,token:r})},setProfilePhotoUploadModal:w,profilePhotoUploadModal:f}),(0,o.jsx)(m,{data:M,authUser:e,setShowProfessionForm:U,showProfessionForm:C,setUploadImageModal:S,singleEdit:J})]}),(0,o.jsxs)("div",{className:"w-full px-5 flex flex-col lg:flex-row ",children:[(0,o.jsx)(p,{data:M,user:e,setShowBioForm:Z,showBioForm:_,setShowInterestForm:q,showInterestForm:V,singleEdit:J,handleDeleteBio:function(){var e=t.userId;ee({token:r,userId:e})},handleDeleteInterest:function(e){var s=t.userId;re({interest:e,token:r,userId:s})},isInterestLoading:se}),(0,o.jsxs)("div",{className:"mx-auto w-full lg:ml-20",children:[(0,o.jsx)(h,{userId:t.userId,authUser:e}),(0,o.jsx)("main",{children:(0,o.jsx)(n.j3,{})})]})]})]}),(0,o.jsx)(a.Z,{isVisible:F,onClose:function(){return S(!1)},children:(0,o.jsx)(v.Z,{submitFn:function(e){O({formData:e,token:r})},isUploadLoading:R,isUploadError:X,uploadError:Y,categoryData:K,method:"create"})})]})},N=function(e){var t=e.params;return b.Eh.fetchQuery({queryKey:["user",t.userId],queryFn:function(e){var r=e.signal;return(0,b.BT)({signal:r,id:t.userId})}})}},5893:function(e,t,r){r(2791);var s=r(184);t.Z=function(e){var t=e.isVisible,r=e.onClose,n=e.children;if(!t)return null;return(0,s.jsx)("div",{onClick:function(e){"modalWrapper"===e.target.id&&r()},id:"modalWrapper",className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center",children:(0,s.jsxs)("div",{className:"max-w-[800px] flex flex-col",children:[(0,s.jsx)("button",{onClick:r,className:"text-white text-xl place-self-end",children:"X"}),(0,s.jsx)("div",{className:"bg-white p-2 rounded",children:n})]})})}}}]);
//# sourceMappingURL=662.c364134f.chunk.js.map